# Estratégia de Transformação Digital e Governo Aberto na SME

Como um governo pode atuar para garantir o bem comum de todos? Na SME, acreditamos que um dos meios para isso seja garantir transparência e prestação de contas e constante relação entre governo e sociedade para o desenvolvimento e implementação de políticas públicas. 

A Portaria SME nº 8.008, de 12 de novembro de 2018 oficializou a estratégia da Secretaria Municipal de Educação de SP para que nossas ações sejam pautadas nos princípios de Governo Aberto e para usarmos os valores e benefícios do mundo digital para melhorarmos nossos processos e serviços para os cidadãos. 
Com isso, pretendemos: 
- aumentar os níveis de transparência ativa e de abertura de dados, garantindo a proteção de dados pessoais; 
- instituir metodologias ágeis e colaborativas como parte do processo de desenvolvimento e de evolução de sistemas administrativos e de serviços digitais; 
- fortalecer o controle das políticas educacionais e da aplicação de recursos por parte da gestão e da sociedade; 
- promover espaços e metodologias de colaboração entre governo, academia, sociedade civil e setor privado. 

O [Ateliê do Software](http://forum.govit.prefeitura.sp.gov.br/uploads/default/original/1X/c88a4715eb3f9fc3ceb882c1f6afe9e308805a17.pdf) é uma das ferramentas para operacionalização. Baseado em um modelo de contratação inspirado pelos movimentos ágil e de Software Craftsmanship, trabalhamos com equipes multidisciplinares para o desenvolvimento de produtos que beneficiam toda a comunidade escolar (técnicos da SME e DREs, gestores, professores, alunos e famílias) e concretizam os objetivos da Estratégia de Transformação Digital e Governo Aberto “Pátio Digital”.

# Conteúdo

1. [Sobre o Produto](#sobre-o-produto) 
2. [Sobre o Time](#sobre-o-time) 
3. [Como surgiu](#como-surgiu)  
4. [Links Úteis](#links-úteis)  
5. [Comunicação](#comunicação)  
6. [Como contribuir](#como-contribuir)  
7. [Repositórios](#repositórios)  
8. [Instalação e Configuração](#instalação-e-configuração)
 
# Sobre o Produto

Para as **unidades escolares da rede municipal de educação da cidade de São Paulo** 

Que **precisam acompanhar o fornecimento de alimentação escolar**

O **SIGPAE (Sistema de Gestão  do Programa para Alimentação Escolar)**  

É uma **plataforma** 

Que **gerencia todas as etapas de solicitações de alimentação, cadastro de produtos e controles internos** 

Diferentemente de **solicitações através de planilhas, e-mails e telefonemas**  

O nosso produto **garante mais agilidade, confiabilidade e segurança para os processos.**

## Objetivos de Negócio

O SIGPAE tem como objetivo automatizar os processos internos de fornecimento e distribuição de alimentação escolar. Atualmente, temos os seguintes módulos desenvolvidos ou em desenvolvimento:

- Gestão de Produtos: gestão de produtos, marcas e fabricantes oferecidos para os estudantes da rede municipal
- Dieta Especial: registro e análise de solicitações de Dieta Especial feitas pelas Unidades Educacionais (UEs) e criação de protocolos de Dieta Especial para os estudantes
- Gestão de Alimentação: registro e análise de solicitações de alimentação enviadas pelas UEs
- Medição Inicial: registro e análise das refeições servidas pelas UEs mensalmente
- Abastecimento: distribuição e conferência dis alimentos enviados pelos Distribuidores as unidades educacionais diretas, mistas e parceiras da rede municipal de educação da cidade de São Paulo
- Pré-Recebimento: controle e planejamento das guias para distribuição dos alimentos.

No futuro, o sistema também contará com módulos que apoiarão o trabalho da criação do cardápio, das nutricionistas da Supervisão, do Faturamento, entre outras. Desta forma, pretende-se que todo o trabalho desenvolvido para fornecer alimentação para as mais de 1000 UEs beneficiadas seja realizado a partir de um sistema, com maior segurança e automatização de processos.

## Personas

**Quem:** Direção Escolar
**Características e necessidades:** responsável pela gestão da escola, com necessidade de otimização de tempo. O sistema é essencial para melhor controle das solicitações realizadas pela UE e demandas de DRE e CODAE

**Quem:** Assistente Técnico de Educação e Nutricionista
**Características e necessidades:** responsável pela gestão das solicitações de alimentação no núcleo de gestão de contratos na CODAE, com necessidade de organização do recebimento das diversas solicitações das UEs

**Quem:** Nutricionista de Dieta Especial
**Características e necessidades:** responsável pela validação de solicitações e prescrição da Dieta Especial, tem necessidade de otimização do processo para revisão, encaminhamento e fornecimento da dieta nas escolas. Processos burocráticos, dolorosos e com decisões de alto impacto para os estudantes

**Quem:** Nutricionista P&D
**Características e necessidades:** responsável pela gestão de produtos (homologação, correção, suspensão e avaliação de reclamação e solicitação de análise sensorial) solicitados pelas empresas terceirizadas, com a necessidade de controle do que pode ser utilizados nas unidades escolares

**Quem:** Diretoria Regional de Educação (DRE)
**Características e necessidades:** responsável pelo gerenciamento das solicitações realizadas pelas escolas que administra, com a necessidade de otimizar e controlar as diversas solicitações das unidades escolares. Para fiscalização e controle das solicitações geradas

**Quem:** Divisão de Qualidade e Logística dos Alimentos (DILOG)
**Características e necessidades:** responsável pelo processo de abastecimento da Rede Municipal de Educação das unidades diretas, mistas e parceiras

**Quem:** Divisão de Nutrição Escolar (DINUTRE)
**Características e necessidades:** responsável pela definição do cardápio
  
## Funcionalidades

**Gestão de Alimentação**
- Inclusão de Alimentação
- Solicitação de Kit Lanche
- Suspensão de Alimentação
- Alteração de Cardápio
- Inversão de dia de Cardápio
- Relatórios

**Gestão de Produtos**
- Homologação de produto
- Suspensão e ativação de produto
- Registro de reclamação
- Analise sensorial
- Correção do produto
- Relatórios

**Dieta Especial**
- Solicitação de Dieta
- Cancelamento de Dieta
- Autorização de Dieta
- Criação de Protocolos de Dieta Especial
- Alteração de UE
- Relatórios

**Abastecimento**
- Requisição de Entregas
- Alteração da Requisição
- Requisição de Entregas
- Ocorrências

**Pré-Recebimento**
- Cronograma de Entrega
- Alteração de Cronograma

## Roadmap

- 1 - Gestão de Alimentação
- 2 - Gestão de Produtos e Dieta Especial
- 3 - Abastecimento
- 4 – CoreSSO
- 5 - Pré-Recebimento
- 7 – Ocorrências
- 8 - Medição Inicial EMEF (visão UE)
- 9 - Medição Inicial EMEF (visão DRE e CODAE)
- 10 - Medição Inicial CEI e EMEI
- 11 - Cardápio
- 12 - Supervisão
- 13 - Gestão de nutricionistas

Detalhamento do roadmap: (https://whimsical.com/roadmap-geral-sigpae-C2tThx2G9GpuVviBeHZ5me@VsSo8s35X1aaSatHxnJFRV)

Fluxos: (https://whimsical.com/fluxos-i7SkAADB94XRhRMd2afif)

# Sobre o Time

| Papel | Titular                       | Suplente  
|--|-------------------------------|--|  
| Product Owner | Andrea Wang e Daniela Chichon | Carina Jakitas |  
| Agente de Governança | Juliana Demay                 | Vitor Ferragini |  
| Gerente de Projeto | Aline Freitas                 | |  
| Scrum Master | Ricardo Coda                       |  | 
| Designer de Serviços | Caio Dib                    | |  
| Analista de Negócios | Jaqueline Sargi            |  |  
| Analista UX/UI | Carol Casassola                  |  |  
| Analista Programador | Calvin Rossinhole             | Rodolpho Lobo, João Mesquita e Diogo Santos|
| Analista de Teste | Paula Pimentel                |  |

## Protótipos

**Protótipo Navegável:**

**Visão Escola:**
(https://www.figma.com/file/52MKvjiFFjoy7WLuvLLjAi/Spt_13-ALIMENTA%C3%87%C3%83O-Terceirizadas_sprint13-230719?node-id=0%3A25539)

**Visão CODAE:**
(https://www.figma.com/file/52MKvjiFFjoy7WLuvLLjAi/Spt_13-ALIMENTA%C3%87%C3%83O-Terceirizadas_sprint13-230719?node-id=0%3A36995)

**Visão DRE:** 
(https://www.figma.com/file/52MKvjiFFjoy7WLuvLLjAi/Spt_13-ALIMENTA%C3%87%C3%83O-Terceirizadas_sprint13-230719?node-id=0%3A43643)

**Mapeamento inicial de fluxos:** 
(https://drive.google.com/drive/folders/1mGy5On44p_wHBldWoEKyLrBTG98mhZaC?usp=sharing)

# Links Úteis

**Homologação:**

[https://hom-sigpae.sme.prefeitura.sp.gov.br/](https://hom-sigpae.sme.prefeitura.sp.gov.br/)

**Produção:**

[https://sigpae.sme.prefeitura.sp.gov.br/](https://sigpae.sme.prefeitura.sp.gov.br/)

# Comunicação:

| Canal de comunicação | Objetivos |
|----------------------|-----------|
| [Issues do Github](https://github.com/prefeiturasp/SME-Terceirizadas/issues) | - Sugestão de novas funcionalidades<br> - Reportar bugs<br> - Discussões técnicas |

# Como contribuir

Contribuições são **super bem vindas**! Se você tem vontade de construir o SIGPAE conosco, veja o nosso [guia de contribuição](./CONTRIBUTING.md) onde explicamos detalhadamente como trabalhamos e de que formas você pode nos ajudar a alcançar nossos objetivos. Lembrando que todos devem seguir  nosso [código de conduta](./CODEOFCONDUCT.md).

# Repositórios

Informar os repositórios de código que envolvem a solução:

[SME-TERCEIRIZADAS] [https://github.com/prefeiturasp/SME-Terceirizadas](https://github.com/prefeiturasp/SME-Terceirizadas)

[SME-TERCEIRIZADAS-FRONTEND]
[https://github.com/prefeiturasp/SME-Terceirizadas-Frontend](https://github.com/prefeiturasp/SME-Terceirizadas-Frontend)
 
# Instalação e Configuração

## Pré-requisitos

* git
* Docker
* Docker compose

## Banco de dados no Docker

Vamos rodar apenas o banco de dados em Docker, para isto crie uma pasta fora do projeto com o nome `sme-docker`.

```
mkdir sme-docker
cd sme-docker
```

E dentro da pasta crie um arquivo `docker-postgres.yml`

**Importante:** se você já estiver usando a porta 5432 na sua máquina, então mude a porta do host, ex. 5433.

E troque `HOME` para o path absoluto do projeto SME-Terceirizadas.

```yml
version: '3.1'

services: 
  db:
    image: postgres:11.2-alpine
    restart: always
    env_file:
      - HOME/SME-Terceirizadas/.env
    volumes:
      - ./pgdata:/var/lib/postgresql/data
    ports:
      - 5433:5432

  pgadmin4:
    image: dpage/pgadmin4
    restart: always
    ports:
      - 9090:9090
    volumes:
      - ./pgbkp:/var/lib/pgadmin/storage/
```

## Build da imagem do banco de dados

### Execução da imagem do banco de dados

Abra um terminal na raiz do projeto e execute o seguinte para o desenvolvimento local:

```
$ docker-compose -f docker-postgres.yml up -d
```

### Rodando o Celery

Na pasta `sme-docker` rodar o comando

```
docker-compose -f docker-celery.yml up -d
```

Na pasta `SME-Terceirizadas`, com a virtualenv ativa rode

```
celery -A config worker --beat --scheduler django --loglevel=info
```


### Rodando o backend

Pré-requisitos:

* pipenv versão 2022.4.8
```
pip install pipenv==2022.4.8
```

```
pipenv shell
pyenv local 3.8.10
pipenv install --dev

python manage.py migrate

# Mude para a branch development
git checkout -b development origin/development

python manage.py carga_dados
```
